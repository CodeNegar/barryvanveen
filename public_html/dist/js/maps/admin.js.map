{"version":3,"sources":["autosize.js","ajaxq.js","admin.js"],"names":["root","factory","define","amd","exports","module","autosize","this","main","ta","init","style","window","getComputedStyle","resize","wordWrap","width","offsetWidth","maxHeight","parseFloat","heightOffset","boxSizing","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","adjust","startHeight","height","htmlTop","document","documentElement","scrollTop","bodyTop","body","endHeight","scrollHeight","overflowY","evt","createEvent","initEvent","dispatchEvent","nodeName","hasAttribute","addEventListener","removeEventListener","Object","keys","forEach","key","removeAttribute","bind","overflow","setAttribute","elements","length","Array","prototype","call","$","queues","activeReqs","ajaxq","qname","opts","enqueue","cb","push","xhr","dequeue","nextCallback","shift","deferred","Deferred","promise","success","done","error","fail","complete","always","clonedOptions","extend","jqXHR","ajax","apply","resolve","arguments","reject","each","i","method","url","data","callback","type","isFunction","undefined","dataType","isQueueRunning","hasOwnProperty","isAnyQueueRunning","isRunning","getActiveRequest","abort","current","clear","jQuery","Barryvanveen","admin","callTimer","initClickableTableRows","initAutosizeTextareas","initMarkdownEditors","initLogModal","mousedown","e","preventDefault","which","win","open","focus","location","abortPostQueue","queue","MarkdownEditor","element","$input","$preview","name","inputname","attr","updateMarkdownEditor","clearTimeout","setTimeout","postq","markdownToHtmlRoute","markdown","val","html","Prism","highlightAll","keyup","index","editor","on","event","button","relatedTarget","level","text","file","stack","modal","find"],"mappings":"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","file":"admin.js","sourcesContent":["/*!\n\tAutosize 2.0.0\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (root, factory) {\n\t'use strict';\n\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.autosize = factory();\n  }\n}(this, function () {\n\tfunction main(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || ta.hasAttribute('data-autosize-on')) { return; }\n\n\t\tvar maxHeight;\n\t\tvar heightOffset;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\t// horizontal overflow is hidden, so break-word is necessary for handling words longer than the textarea width\n\t\t\tta.style.wordWrap = 'break-word';\n\n\t\t\t// Chrome/Safari-specific fix:\n\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari doesn't reflow the text to account for the space\n\t\t\t// made available by removing the scrollbar. This workaround will cause the text to reflow.\n\t\t\tvar width = ta.style.width;\n\t\t\tta.style.width = '0px';\n\t\t\t// Force reflow:\n\t\t\t/* jshint ignore:start */\n\t\t\tta.offsetWidth;\n\t\t\t/* jshint ignore:end */\n\t\t\tta.style.width = width;\n\n\t\t\tmaxHeight = style.maxHeight !== 'none' ? parseFloat(style.maxHeight) : false;\n\t\t\t\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth);\n\t\t\t}\n\n\t\t\tadjust();\n\t\t}\n\n\t\tfunction adjust() {\n\t\t\tvar startHeight = ta.style.height;\n\t\t\tvar htmlTop = document.documentElement.scrollTop;\n\t\t\tvar bodyTop = document.body.scrollTop;\n\t\t\t\n\t\t\tta.style.height = 'auto';\n\n\t\t\tvar endHeight = ta.scrollHeight+heightOffset;\n\n\t\t\tif (maxHeight !== false && maxHeight < endHeight) {\n\t\t\t\tendHeight = maxHeight;\n\t\t\t\tif (ta.style.overflowY !== 'scroll') {\n\t\t\t\t\tta.style.overflowY = 'scroll';\n\t\t\t\t}\n\t\t\t} else if (ta.style.overflowY !== 'hidden') {\n\t\t\t\tta.style.overflowY = 'hidden';\n\t\t\t}\n\n\t\t\tta.style.height = endHeight+'px';\n\n\t\t\t// prevents scroll-position jumping\n\t\t\tdocument.documentElement.scrollTop = htmlTop;\n\t\t\tdocument.body.scrollTop = bodyTop;\n\n\t\t\tif (startHeight !== ta.style.height) {\n\t\t\t\tvar evt = document.createEvent('Event');\n\t\t\t\tevt.initEvent('autosize.resized', true, false);\n\t\t\t\tta.dispatchEvent(evt);\n\t\t\t}\n\t\t}\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', adjust);\n\t\t}\n\n\t\twindow.addEventListener('resize', adjust);\n\t\tta.addEventListener('input', adjust);\n\n\t\tta.addEventListener('autosize.update', adjust);\n\n\t\tta.addEventListener('autosize.destroy', function(style){\n\t\t\twindow.removeEventListener('resize', adjust);\n\t\t\tta.removeEventListener('input', adjust);\n\t\t\tta.removeEventListener('keyup', adjust);\n\t\t\tta.removeEventListener('autosize.destroy');\n\n\t\t\tObject.keys(style).forEach(function(key){\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tta.removeAttribute('data-autosize-on');\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\toverflow: ta.style.overflow,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\twordWrap: ta.style.wordWrap,\n\t\t\tresize: ta.style.resize\n\t\t}));\n\n\t\tta.setAttribute('data-autosize-on', true);\n\t\tta.style.overflow = 'hidden';\n\t\tta.style.overflowY = 'hidden';\n\n\t\tinit();\t\t\n\t}\n\n\t// Do nothing in IE8 or lower\n\tif (typeof window.getComputedStyle !== 'function') {\n\t\treturn function(elements) {\n\t\t\treturn elements;\n\t\t};\n\t} else {\n\t\treturn function(elements) {\n\t\t\tif (elements && elements.length) {\n\t\t\t\tArray.prototype.forEach.call(elements, main);\n\t\t\t} else if (elements && elements.nodeName) {\n\t\t\t\tmain(elements);\n\t\t\t}\n\t\t\treturn elements;\n\t\t};\n\t}\n}));\n","// AjaxQ jQuery Plugin\n// Copyright (c) 2012 Foliotek Inc.\n// MIT License\n// https://github.com/Foliotek/ajaxq\n\n(function($) {\n\n    var queues = {};\n    var activeReqs = {};\n\n    // Register an $.ajaxq function, which follows the $.ajax interface, but allows a queue name which will force only one request per queue to fire.\n    $.ajaxq = function(qname, opts) {\n\n        if (typeof opts === \"undefined\") {\n            throw (\"AjaxQ: queue name is not provided\");\n        }\n\n        // Will return a Deferred promise object extended with success/error/callback, so that this function matches the interface of $.ajax\n        var deferred = $.Deferred(),\n            promise = deferred.promise();\n\n        promise.success = promise.done;\n        promise.error = promise.fail;\n        promise.complete = promise.always;\n\n        // Create a deep copy of the arguments, and enqueue this request.\n        var clonedOptions = $.extend(true, {}, opts);\n        enqueue(function() {\n            // Send off the ajax request now that the item has been removed from the queue\n            var jqXHR = $.ajax.apply(window, [clonedOptions]);\n\n            // Notify the returned deferred object with the correct context when the jqXHR is done or fails\n            // Note that 'always' will automatically be fired once one of these are called: http://api.jquery.com/category/deferred-object/.\n            jqXHR.done(function() {\n                deferred.resolve.apply(this, arguments);\n            });\n            jqXHR.fail(function() {\n                deferred.reject.apply(this, arguments);\n            });\n\n            jqXHR.always(dequeue); // make sure to dequeue the next request AFTER the done and fail callbacks are fired\n            return jqXHR;\n        });\n\n        return promise;\n\n\n        // If there is no queue, create an empty one and instantly process this item.\n        // Otherwise, just add this item onto it for later processing.\n        function enqueue(cb) {\n            if (!queues[qname]) {\n                queues[qname] = [];\n                var xhr = cb();\n                activeReqs[qname] = xhr;\n            }\n            else {\n                queues[qname].push(cb);\n            }\n        }\n\n        // Remove the next callback from the queue and fire it off.\n        // If the queue was empty (this was the last item), delete it from memory so the next one can be instantly processed.\n        function dequeue() {\n            if (!queues[qname]) {\n                return;\n            }\n            var nextCallback = queues[qname].shift();\n            if (nextCallback) {\n                var xhr = nextCallback();\n                activeReqs[qname] = xhr;\n            }\n            else {\n                delete queues[qname];\n                delete activeReqs[qname];\n            }\n        }\n    };\n\n    // Register a $.postq and $.getq method to provide shortcuts for $.get and $.post\n    // Copied from jQuery source to make sure the functions share the same defaults as $.get and $.post.\n    $.each( [ \"getq\", \"postq\" ], function( i, method ) {\n        $[ method ] = function( qname, url, data, callback, type ) {\n\n            if ( $.isFunction( data ) ) {\n                type = type || callback;\n                callback = data;\n                data = undefined;\n            }\n\n            return $.ajaxq(qname, {\n                type: method === \"postq\" ? \"post\" : \"get\",\n                url: url,\n                data: data,\n                success: callback,\n                dataType: type\n            });\n        };\n    });\n\n    var isQueueRunning = function(qname) {\n        return queues.hasOwnProperty(qname);\n    };\n\n    var isAnyQueueRunning = function() {\n        for (var i in queues) {\n            if (isQueueRunning(i)) return true;\n        }\n        return false;\n    };\n\n    $.ajaxq.isRunning = function(qname) {\n        if (qname) return isQueueRunning(qname);\n        else return isAnyQueueRunning();\n    };\n\n    $.ajaxq.getActiveRequest = function(qname) {\n        if (!qname) throw (\"AjaxQ: queue name is required\");\n\n        return activeReqs[qname];\n    };\n\n    $.ajaxq.abort = function(qname) {\n        if (!qname) throw (\"AjaxQ: queue name is required\");\n        \n        var current = $.ajaxq.getActiveRequest(qname);\n        delete queues[qname];\n        delete activeReqs[qname];\n        if (current) current.abort();\n    };\n\n    $.ajaxq.clear = function(qname) {\n        if (!qname) {\n            for (var i in queues) {\n                if (queues.hasOwnProperty(i)) {\n                    queues[i] = [];\n                }\n            }\n        }\n        else {\n            if (queues[qname]) {\n                queues[qname] = [];\n            }\n        }\n    };\n\n})(jQuery);\n","window.Barryvanveen = window.Barryvanveen || {};\n\nwindow.Barryvanveen.admin = function() {\n\n    // timers to keep track of ajax-calls that are scheduled\n    window.Barryvanveen.callTimer = [];\n\n\twindow.Barryvanveen.initClickableTableRows();\n    window.Barryvanveen.initAutosizeTextareas();\n\twindow.Barryvanveen.initMarkdownEditors();\n    window.Barryvanveen.initLogModal();\n\n};\n\n/**\n * init clickable table rows\n */\nwindow.Barryvanveen.initClickableTableRows = function() {\n\n    $('.js-clickable-row').mousedown(function(e) {\n        e.preventDefault();\n\n        // middle mouseclick, open in new window\n        if (e.which == 2) {\n            var win = window.open($(this).data('href'), '_blank');\n            if (win) {\n                win.focus();\n            }\n            return;\n        }\n        window.document.location = $(this).data(\"href\");\n    });\n\n};\n\n/**\n * init autosize on textareas\n */\nwindow.Barryvanveen.initAutosizeTextareas = function() {\n\n    autosize($('textarea'));\n\n};\n\n/**\n * cancel all posts to a named queue\n */\nwindow.Barryvanveen.abortPostQueue = function(queue) {\n\n    $.ajaxq.abort(queue);\n\n};\n\n/**\n * turn an element into a markdown editor\n *\n * @param element\n */\nwindow.Barryvanveen.MarkdownEditor = function(element) {\n\n    // store elements\n    var $input = $(element);\n    var $preview = $('div[data-markdown-editor-name=' + element.name + ']');\n    var inputname = $input.attr('name');\n\n    // update the html-preview\n    this.updateMarkdownEditor = function () {\n\n        // clear any timers for this inputname\n        if (typeof(window.Barryvanveen.callTimer[inputname]) !== \"undefined\") {\n            clearTimeout(window.Barryvanveen.callTimer[inputname]);\n        }\n\n        // start a timer for this particular input, once the timer runs out\n        // the html will be requested from the server\n        window.Barryvanveen.callTimer[inputname] = setTimeout(function() {\n\n            // abort all pending requests for this input field\n            Barryvanveen.abortPostQueue($input.attr('name'));\n\n            // make a new ajax post to retrieve html for this markdown\n            $.postq(inputname, Barryvanveen.markdownToHtmlRoute, {markdown: $input.val()}, function(data) {\n\n                // update the preview with retrieved html\n                $preview.html(data.html);\n                // use Prism for syntax highlighting in preview\n                Prism.highlightAll();\n\n            }, 'json');\n\n        }, 1000);\n\n    };\n\n    // update the html preview on keyUp\n    $input.keyup(this.updateMarkdownEditor);\n\n    // start with filling the preview\n    this.updateMarkdownEditor();\n\n};\n\n/**\n * init markdown editors\n */\nwindow.Barryvanveen.initMarkdownEditors = function() {\n\n    $('textarea.js-markdown-editor').each(function(index, element) {\n        window.Barryvanveen.editor = new window.Barryvanveen.MarkdownEditor(element);\n    });\n\n};\n\n/**\n * init log table\n */\nwindow.Barryvanveen.initLogModal = function() {\n\n    // handle clicks to open a bootstrap modal with full exception stack\n    $('#logModal').on('show.bs.modal', function (event) {\n\n        // Button that triggered the modal\n        var button = $(event.relatedTarget);\n\n        // Extract info from data-* attributes\n        var level = button.data('level');\n        var text = button.data('text');\n        var file = button.data('file');\n        var stack = button.data('stack');\n\n        // Update the modal's content\n        var modal = $(this);\n        modal.find('.modal-title').html(level + \": \" + text);\n        modal.find('.modal-body').html(\"<small>In file \" + file + \"<br><br>\" + stack + \"</small>\");\n\n    });\n\n};\n\n/**\n * start scripts\n */\nwindow.Barryvanveen.admin();"],"sourceRoot":"/source/"}