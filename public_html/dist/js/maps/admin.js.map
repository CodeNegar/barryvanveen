{"version":3,"sources":["admin.js"],"names":["window","Barryvanveen","admin","initClickableTableRows","initMarkdownEditors","initCharacterCounters","initLogModal","$","mousedown","e","preventDefault","which","win","open","this","data","focus","document","location","MarkdownEditor","element","$input","$preview","name","updateMarkdownEditor","debounce","post","markdownToHtmlRoute","markdown","val","html","Prism","highlightAll","keyup","each","index","editor","CharacterCounter","$counter","inputname","updateCounter","length","counter","on","event","button","relatedTarget","level","text","file","stack","modal","find"],"mappings":"AAAAA,OAAOC,aAAeD,OAAOC,iBAE7BD,OAAOC,aAAaC,MAAQ,WAExBF,OAAOC,aAAaE,yBACpBH,OAAOC,aAAaG,sBACpBJ,OAAOC,aAAaI,wBACpBL,OAAOC,aAAaK,gBAOxBN,OAAOC,aAAaE,uBAAyB,WAEzCI,EAAE,qBAAqBC,UAAU,SAAUC,GAIvC,GAHAA,EAAEC,iBAGa,GAAXD,EAAEE,MAAY,CACd,GAAIC,GAAMZ,OAAOa,KAAKN,EAAEO,MAAMC,KAAK,QAAS,SAI5C,aAHIH,GACAA,EAAII,SAKZhB,OAAOiB,SAASC,SAAWX,EAAEO,MAAMC,KAAK,WAUhDf,OAAOC,aAAakB,eAAiB,SAAUC,GAE3C,GAAIC,GAASd,EAAEa,GACXE,EAAWf,EAAE,iCAAmCa,EAAQG,KAAO,IAEnET,MAAKU,qBAAuBxB,OAAOC,aAAawB,SAAS,WAErDlB,EAAEmB,KAAKzB,aAAa0B,qBAAsBC,SAAUP,EAAOQ,OAAQ,SAAUd,GAEzEO,EAASQ,KAAKf,EAAKe,MACnBC,MAAMC,gBAEP,SAEJ,KAEHX,EAAOY,MAAMnB,KAAKU,sBAElBV,KAAKU,wBAOTxB,OAAOC,aAAaG,oBAAsB,WAEtCG,EAAE,+BAA+B2B,KAAK,SAAUC,EAAOf,GACnDpB,OAAOC,aAAamC,OAAS,GAAIpC,QAAOC,aAAakB,eAAeC,MAU5EpB,OAAOC,aAAaoC,iBAAmB,SAAUjB,GAE7C,GAAIkB,GAAW/B,EAAEa,GACbmB,EAAYD,EAASvB,KAAK,0BAC1BM,EAASd,EAAE,kBAAoBgC,EAAY,KAE/CzB,MAAK0B,cAAgB,WACjBF,EAASR,KAAKT,EAAOQ,MAAMY,SAG/BpB,EAAOY,MAAMnB,KAAK0B,eAElB1B,KAAK0B,iBAOTxC,OAAOC,aAAaI,sBAAwB,WAExCE,EAAE,yBAAyB2B,KAAK,SAAUC,EAAOf,GAC7CpB,OAAOC,aAAayC,QAAU,GAAI1C,QAAOC,aAAaoC,iBAAiBjB,MAS/EpB,OAAOC,aAAaK,aAAe,WAG/BC,EAAE,aAAaoC,GAAG,gBAAiB,SAAUC,GAGzC,GAAIC,GAAStC,EAAEqC,EAAME,eAGjBC,EAAQF,EAAO9B,KAAK,SACpBiC,EAAOH,EAAO9B,KAAK,QACnBkC,EAAOJ,EAAO9B,KAAK,QACnBmC,EAAQL,EAAO9B,KAAK,SAGpBoC,EAAQ5C,EAAEO,KACdqC,GAAMC,KAAK,gBAAgBtB,KAAKiB,EAAQ,KAAOC,GAC/CG,EAAMC,KAAK,eAAetB,KAAK,kBAAoBmB,EAAO,WAAaC,EAAQ,eASvFlD,OAAOC,aAAaC","file":"../admin.js","sourcesContent":["window.Barryvanveen = window.Barryvanveen || {};\n\nwindow.Barryvanveen.admin = function () {\n\n    window.Barryvanveen.initClickableTableRows();\n    window.Barryvanveen.initMarkdownEditors();\n    window.Barryvanveen.initCharacterCounters();\n    window.Barryvanveen.initLogModal();\n\n};\n\n/**\n * init clickable table rows\n */\nwindow.Barryvanveen.initClickableTableRows = function () {\n\n    $('.js-clickable-row').mousedown(function (e) {\n        e.preventDefault();\n\n        // middle mouseclick, open in new window\n        if (e.which == 2) {\n            var win = window.open($(this).data('href'), '_blank');\n            if (win) {\n                win.focus();\n            }\n            return;\n        }\n\n        window.document.location = $(this).data(\"href\");\n    });\n\n};\n\n/**\n * turn an element into a markdown editor\n *\n * @param element\n */\nwindow.Barryvanveen.MarkdownEditor = function (element) {\n\n    var $input = $(element);\n    var $preview = $('div[data-markdown-editor-name=' + element.name + ']');\n\n    this.updateMarkdownEditor = window.Barryvanveen.debounce(function () {\n\n        $.post(Barryvanveen.markdownToHtmlRoute, {markdown: $input.val()}, function (data) {\n\n            $preview.html(data.html);\n            Prism.highlightAll();\n\n        }, 'json');\n\n    }, 500);\n\n    $input.keyup(this.updateMarkdownEditor);\n\n    this.updateMarkdownEditor();\n\n};\n\n/**\n * init markdown editors\n */\nwindow.Barryvanveen.initMarkdownEditors = function () {\n\n    $('textarea.js-markdown-editor').each(function (index, element) {\n        window.Barryvanveen.editor = new window.Barryvanveen.MarkdownEditor(element);\n    });\n\n};\n\n/**\n * turn an element into a character counter\n *\n * @param element\n */\nwindow.Barryvanveen.CharacterCounter = function (element) {\n\n    var $counter = $(element);\n    var inputname = $counter.data('character-counter-name');\n    var $input = $('textarea[name=\"' + inputname + '\"]');\n\n    this.updateCounter = function () {\n        $counter.html($input.val().length);\n    };\n\n    $input.keyup(this.updateCounter);\n\n    this.updateCounter();\n\n};\n\n/**\n * init character counters\n */\nwindow.Barryvanveen.initCharacterCounters = function () {\n\n    $('.js-character-counter').each(function (index, element) {\n        window.Barryvanveen.counter = new window.Barryvanveen.CharacterCounter(element);\n    });\n\n};\n\n\n/**\n * init log table\n */\nwindow.Barryvanveen.initLogModal = function () {\n\n    // handle clicks to open a bootstrap modal with full exception stack\n    $('#logModal').on('show.bs.modal', function (event) {\n\n        // Button that triggered the modal\n        var button = $(event.relatedTarget);\n\n        // Extract info from data-* attributes\n        var level = button.data('level');\n        var text = button.data('text');\n        var file = button.data('file');\n        var stack = button.data('stack');\n\n        // Update the modal's content\n        var modal = $(this);\n        modal.find('.modal-title').html(level + \": \" + text);\n        modal.find('.modal-body').html(\"<small>In file \" + file + \"<br><br>\" + stack + \"</small>\");\n\n    });\n\n};\n\n/**\n * start scripts\n */\nwindow.Barryvanveen.admin();"]}