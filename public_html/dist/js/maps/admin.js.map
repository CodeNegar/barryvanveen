{"version":3,"sources":["autosize.js","ajaxq.js","admin.js"],"names":["global","factory","define","amd","exports","module","mod","autosize","this","assign","ta","init","style","window","getComputedStyle","overflowY","resize","heightOffset","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","update","changeOverflow","value","width","offsetWidth","setOverflowY","htmlTop","pageYOffset","bodyTop","document","body","scrollTop","originalHeight","height","endHeight","scrollHeight","clientWidth","documentElement","startHeight","evt","createEvent","dispatchEvent","_ref","undefined","arguments","_ref$setOverflowX","setOverflowX","_ref$setOverflowY","nodeName","set","has","pageResize","destroy","removeEventListener","Object","keys","forEach","key","bind","overflowX","wordWrap","addEventListener","add","Set","list","Boolean","indexOf","push","delete","splice","name","Event","e","initEvent","el","options","Array","prototype","call","length","x","require","jQuery","$","queues","activeReqs","ajaxq","qname","opts","enqueue","cb","xhr","dequeue","nextCallback","shift","deferred","Deferred","promise","success","done","error","fail","complete","always","deferredOpts","clonedOptions","extend","jqXHR","ajax","apply","resolve","reject","each","i","method","url","data","callback","type","isFunction","dataType","isQueueRunning","hasOwnProperty","isAnyQueueRunning","isRunning","getActiveRequest","abort","current","clear","Barryvanveen","admin","callTimer","initClickableTableRows","initAutosizeTextareas","initMarkdownEditors","initCharacterCounters","initLogModal","mousedown","preventDefault","which","win","open","focus","location","abortPostQueue","queue","MarkdownEditor","element","$input","$preview","inputname","attr","updateMarkdownEditor","clearTimeout","setTimeout","postq","markdownToHtmlRoute","markdown","val","html","Prism","highlightAll","keyup","index","editor","CharacterCounter","$counter","updateCounter","counter","on","event","button","relatedTarget","level","text","file","stack","modal","find"],"mappings":"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","file":"admin.js","sourcesContent":["/*!\r\n\tAutosize 3.0.15\r\n\tlicense: MIT\r\n\thttp://www.jacklmoore.com/autosize\r\n*/\r\n(function (global, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(['exports', 'module'], factory);\r\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\r\n\t\tfactory(exports, module);\r\n\t} else {\r\n\t\tvar mod = {\r\n\t\t\texports: {}\r\n\t\t};\r\n\t\tfactory(mod.exports, mod);\r\n\t\tglobal.autosize = mod.exports;\r\n\t}\r\n})(this, function (exports, module) {\r\n\t'use strict';\r\n\r\n\tvar set = typeof Set === 'function' ? new Set() : (function () {\r\n\t\tvar list = [];\r\n\r\n\t\treturn {\r\n\t\t\thas: function has(key) {\r\n\t\t\t\treturn Boolean(list.indexOf(key) > -1);\r\n\t\t\t},\r\n\t\t\tadd: function add(key) {\r\n\t\t\t\tlist.push(key);\r\n\t\t\t},\r\n\t\t\t'delete': function _delete(key) {\r\n\t\t\t\tlist.splice(list.indexOf(key), 1);\r\n\t\t\t} };\r\n\t})();\r\n\r\n\tvar createEvent = function createEvent(name) {\r\n\t\treturn new Event(name);\r\n\t};\r\n\ttry {\r\n\t\tnew Event('test');\r\n\t} catch (e) {\r\n\t\t// IE does not support `new Event()`\r\n\t\tcreateEvent = function (name) {\r\n\t\t\tvar evt = document.createEvent('Event');\r\n\t\t\tevt.initEvent(name, true, false);\r\n\t\t\treturn evt;\r\n\t\t};\r\n\t}\r\n\r\n\tfunction assign(ta) {\r\n\t\tvar _ref = arguments[1] === undefined ? {} : arguments[1];\r\n\r\n\t\tvar _ref$setOverflowX = _ref.setOverflowX;\r\n\t\tvar setOverflowX = _ref$setOverflowX === undefined ? true : _ref$setOverflowX;\r\n\t\tvar _ref$setOverflowY = _ref.setOverflowY;\r\n\t\tvar setOverflowY = _ref$setOverflowY === undefined ? true : _ref$setOverflowY;\r\n\r\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || set.has(ta)) return;\r\n\r\n\t\tvar heightOffset = null;\r\n\t\tvar overflowY = null;\r\n\t\tvar clientWidth = ta.clientWidth;\r\n\r\n\t\tfunction init() {\r\n\t\t\tvar style = window.getComputedStyle(ta, null);\r\n\r\n\t\t\toverflowY = style.overflowY;\r\n\r\n\t\t\tif (style.resize === 'vertical') {\r\n\t\t\t\tta.style.resize = 'none';\r\n\t\t\t} else if (style.resize === 'both') {\r\n\t\t\t\tta.style.resize = 'horizontal';\r\n\t\t\t}\r\n\r\n\t\t\tif (style.boxSizing === 'content-box') {\r\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\r\n\t\t\t} else {\r\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\r\n\t\t\t}\r\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\r\n\t\t\tif (isNaN(heightOffset)) {\r\n\t\t\t\theightOffset = 0;\r\n\t\t\t}\r\n\r\n\t\t\tupdate();\r\n\t\t}\r\n\r\n\t\tfunction changeOverflow(value) {\r\n\t\t\t{\r\n\t\t\t\t// Chrome/Safari-specific fix:\r\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\r\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\r\n\t\t\t\tvar width = ta.style.width;\r\n\t\t\t\tta.style.width = '0px';\r\n\t\t\t\t// Force reflow:\r\n\t\t\t\t/* jshint ignore:start */\r\n\t\t\t\tta.offsetWidth;\r\n\t\t\t\t/* jshint ignore:end */\r\n\t\t\t\tta.style.width = width;\r\n\t\t\t}\r\n\r\n\t\t\toverflowY = value;\r\n\r\n\t\t\tif (setOverflowY) {\r\n\t\t\t\tta.style.overflowY = value;\r\n\t\t\t}\r\n\r\n\t\t\tresize();\r\n\t\t}\r\n\r\n\t\tfunction resize() {\r\n\t\t\tvar htmlTop = window.pageYOffset;\r\n\t\t\tvar bodyTop = document.body.scrollTop;\r\n\t\t\tvar originalHeight = ta.style.height;\r\n\r\n\t\t\tta.style.height = 'auto';\r\n\r\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\r\n\r\n\t\t\tif (ta.scrollHeight === 0) {\r\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\r\n\t\t\t\tta.style.height = originalHeight;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tta.style.height = endHeight + 'px';\r\n\r\n\t\t\t// used to check if an update is actually necessary on window.resize\r\n\t\t\tclientWidth = ta.clientWidth;\r\n\r\n\t\t\t// prevents scroll-position jumping\r\n\t\t\tdocument.documentElement.scrollTop = htmlTop;\r\n\t\t\tdocument.body.scrollTop = bodyTop;\r\n\t\t}\r\n\r\n\t\tfunction update() {\r\n\t\t\tvar startHeight = ta.style.height;\r\n\r\n\t\t\tresize();\r\n\r\n\t\t\tvar style = window.getComputedStyle(ta, null);\r\n\r\n\t\t\tif (style.height !== ta.style.height) {\r\n\t\t\t\tif (overflowY !== 'visible') {\r\n\t\t\t\t\tchangeOverflow('visible');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (overflowY !== 'hidden') {\r\n\t\t\t\t\tchangeOverflow('hidden');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (startHeight !== ta.style.height) {\r\n\t\t\t\tvar evt = createEvent('autosize:resized');\r\n\t\t\t\tta.dispatchEvent(evt);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar pageResize = function pageResize() {\r\n\t\t\tif (ta.clientWidth !== clientWidth) {\r\n\t\t\t\tupdate();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar destroy = (function (style) {\r\n\t\t\twindow.removeEventListener('resize', pageResize, false);\r\n\t\t\tta.removeEventListener('input', update, false);\r\n\t\t\tta.removeEventListener('keyup', update, false);\r\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\r\n\t\t\tta.removeEventListener('autosize:update', update, false);\r\n\t\t\tset['delete'](ta);\r\n\r\n\t\t\tObject.keys(style).forEach(function (key) {\r\n\t\t\t\tta.style[key] = style[key];\r\n\t\t\t});\r\n\t\t}).bind(ta, {\r\n\t\t\theight: ta.style.height,\r\n\t\t\tresize: ta.style.resize,\r\n\t\t\toverflowY: ta.style.overflowY,\r\n\t\t\toverflowX: ta.style.overflowX,\r\n\t\t\twordWrap: ta.style.wordWrap });\r\n\r\n\t\tta.addEventListener('autosize:destroy', destroy, false);\r\n\r\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\r\n\t\t// so binding to onkeyup to catch most of those events.\r\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\r\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\r\n\t\t\tta.addEventListener('keyup', update, false);\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('resize', pageResize, false);\r\n\t\tta.addEventListener('input', update, false);\r\n\t\tta.addEventListener('autosize:update', update, false);\r\n\t\tset.add(ta);\r\n\r\n\t\tif (setOverflowX) {\r\n\t\t\tta.style.overflowX = 'hidden';\r\n\t\t\tta.style.wordWrap = 'break-word';\r\n\t\t}\r\n\r\n\t\tinit();\r\n\t}\r\n\r\n\tfunction destroy(ta) {\r\n\t\tif (!(ta && ta.nodeName && ta.nodeName === 'TEXTAREA')) return;\r\n\t\tvar evt = createEvent('autosize:destroy');\r\n\t\tta.dispatchEvent(evt);\r\n\t}\r\n\r\n\tfunction update(ta) {\r\n\t\tif (!(ta && ta.nodeName && ta.nodeName === 'TEXTAREA')) return;\r\n\t\tvar evt = createEvent('autosize:update');\r\n\t\tta.dispatchEvent(evt);\r\n\t}\r\n\r\n\tvar autosize = null;\r\n\r\n\t// Do nothing in Node.js environment and IE8 (or lower)\r\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\r\n\t\tautosize = function (el) {\r\n\t\t\treturn el;\r\n\t\t};\r\n\t\tautosize.destroy = function (el) {\r\n\t\t\treturn el;\r\n\t\t};\r\n\t\tautosize.update = function (el) {\r\n\t\t\treturn el;\r\n\t\t};\r\n\t} else {\r\n\t\tautosize = function (el, options) {\r\n\t\t\tif (el) {\r\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\r\n\t\t\t\t\treturn assign(x, options);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t};\r\n\t\tautosize.destroy = function (el) {\r\n\t\t\tif (el) {\r\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t};\r\n\t\tautosize.update = function (el) {\r\n\t\t\tif (el) {\r\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t};\r\n\t}\r\n\r\n\tmodule.exports = autosize;\r\n});","// AjaxQ jQuery Plugin\r\n// Copyright (c) 2012 Foliotek Inc.\r\n// MIT License\r\n// https://github.com/Foliotek/ajaxq\r\n// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(['jquery'], factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // Node/CommonJS\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        // Browser globals\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n    var queues = {};\r\n    var activeReqs = {};\r\n\r\n    // Register an $.ajaxq function, which follows the $.ajax interface, but allows a queue name which will force only one request per queue to fire.\r\n    // opts can be the regular $.ajax settings plainObject, or a callback returning the settings object, to be evaluated just prior to the actual call to $.ajax.\r\n    $.ajaxq = function(qname, opts) {\r\n\r\n        if (typeof opts === \"undefined\") {\r\n            throw (\"AjaxQ: queue name is not provided\");\r\n        }\r\n\r\n        // Will return a Deferred promise object extended with success/error/callback, so that this function matches the interface of $.ajax\r\n        var deferred = $.Deferred(),\r\n            promise = deferred.promise();\r\n\r\n        promise.success = promise.done;\r\n        promise.error = promise.fail;\r\n        promise.complete = promise.always;\r\n\r\n        // Check whether options are to be evaluated at call time or not.\r\n        var deferredOpts = typeof opts === 'function';\r\n        // Create a deep copy of the arguments, and enqueue this request.\r\n        var clonedOptions = !deferredOpts ? $.extend(true, {}, opts) : null;\r\n        enqueue(function() {\r\n            // Send off the ajax request now that the item has been removed from the queue\r\n            var jqXHR = $.ajax.apply(window, [deferredOpts ? opts() : clonedOptions]);\r\n\r\n            // Notify the returned deferred object with the correct context when the jqXHR is done or fails\r\n            // Note that 'always' will automatically be fired once one of these are called: http://api.jquery.com/category/deferred-object/.\r\n            jqXHR.done(function() {\r\n                deferred.resolve.apply(this, arguments);\r\n            });\r\n            jqXHR.fail(function() {\r\n                deferred.reject.apply(this, arguments);\r\n            });\r\n\r\n            jqXHR.always(dequeue); // make sure to dequeue the next request AFTER the done and fail callbacks are fired\r\n\r\n            return jqXHR;\r\n        });\r\n\r\n        return promise;\r\n\r\n\r\n        // If there is no queue, create an empty one and instantly process this item.\r\n        // Otherwise, just add this item onto it for later processing.\r\n        function enqueue(cb) {\r\n            if (!queues[qname]) {\r\n                queues[qname] = [];\r\n                var xhr = cb();\r\n                activeReqs[qname] = xhr;\r\n            }\r\n            else {\r\n                queues[qname].push(cb);\r\n            }\r\n        }\r\n\r\n        // Remove the next callback from the queue and fire it off.\r\n        // If the queue was empty (this was the last item), delete it from memory so the next one can be instantly processed.\r\n        function dequeue() {\r\n            if (!queues[qname]) {\r\n                return;\r\n            }\r\n            var nextCallback = queues[qname].shift();\r\n            if (nextCallback) {\r\n                var xhr = nextCallback();\r\n                activeReqs[qname] = xhr;\r\n            }\r\n            else {\r\n                delete queues[qname];\r\n                delete activeReqs[qname];\r\n            }\r\n        }\r\n    };\r\n\r\n    // Register a $.postq and $.getq method to provide shortcuts for $.get and $.post\r\n    // Copied from jQuery source to make sure the functions share the same defaults as $.get and $.post.\r\n    $.each( [ \"getq\", \"postq\" ], function( i, method ) {\r\n        $[ method ] = function( qname, url, data, callback, type ) {\r\n\r\n            if ( $.isFunction( data ) ) {\r\n                type = type || callback;\r\n                callback = data;\r\n                data = undefined;\r\n            }\r\n\r\n            return $.ajaxq(qname, {\r\n                type: method === \"postq\" ? \"post\" : \"get\",\r\n                url: url,\r\n                data: data,\r\n                success: callback,\r\n                dataType: type\r\n            });\r\n        };\r\n    });\r\n\r\n    var isQueueRunning = function(qname) {\r\n        return (queues.hasOwnProperty(qname) && queues[qname].length > 0) || activeReqs.hasOwnProperty(qname);\r\n    };\r\n\r\n    var isAnyQueueRunning = function() {\r\n        for (var i in queues) {\r\n            if (isQueueRunning(i)) return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    $.ajaxq.isRunning = function(qname) {\r\n        if (qname) return isQueueRunning(qname);\r\n        else return isAnyQueueRunning();\r\n    };\r\n\r\n    $.ajaxq.getActiveRequest = function(qname) {\r\n        if (!qname) throw (\"AjaxQ: queue name is required\");\r\n\r\n        return activeReqs[qname];\r\n    };\r\n\r\n    $.ajaxq.abort = function(qname) {\r\n        if (!qname) throw (\"AjaxQ: queue name is required\");\r\n        \r\n        var current = $.ajaxq.getActiveRequest(qname);\r\n        delete queues[qname];\r\n        delete activeReqs[qname];\r\n        if (current) current.abort();\r\n    };\r\n\r\n    $.ajaxq.clear = function(qname) {\r\n        if (!qname) {\r\n            for (var i in queues) {\r\n                if (queues.hasOwnProperty(i)) {\r\n                    queues[i] = [];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (queues[qname]) {\r\n                queues[qname] = [];\r\n            }\r\n        }\r\n    };\r\n\r\n}));\r\n","window.Barryvanveen = window.Barryvanveen || {};\r\n\r\nwindow.Barryvanveen.admin = function() {\r\n\r\n    // timers to keep track of ajax-calls that are scheduled\r\n    window.Barryvanveen.callTimer = [];\r\n\r\n\twindow.Barryvanveen.initClickableTableRows();\r\n    window.Barryvanveen.initAutosizeTextareas();\r\n\twindow.Barryvanveen.initMarkdownEditors();\r\n    window.Barryvanveen.initCharacterCounters();\r\n    window.Barryvanveen.initLogModal();\r\n\r\n};\r\n\r\n/**\r\n * init clickable table rows\r\n */\r\nwindow.Barryvanveen.initClickableTableRows = function() {\r\n\r\n    $('.js-clickable-row').mousedown(function(e) {\r\n        e.preventDefault();\r\n\r\n        // middle mouseclick, open in new window\r\n        if (e.which == 2) {\r\n            var win = window.open($(this).data('href'), '_blank');\r\n            if (win) {\r\n                win.focus();\r\n            }\r\n            return;\r\n        }\r\n        window.document.location = $(this).data(\"href\");\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * init autosize on textareas\r\n */\r\nwindow.Barryvanveen.initAutosizeTextareas = function() {\r\n\r\n    autosize($('textarea'));\r\n\r\n};\r\n\r\n/**\r\n * cancel all posts to a named queue\r\n */\r\nwindow.Barryvanveen.abortPostQueue = function(queue) {\r\n\r\n    $.ajaxq.abort(queue);\r\n\r\n};\r\n\r\n/**\r\n * turn an element into a markdown editor\r\n *\r\n * @param element\r\n */\r\nwindow.Barryvanveen.MarkdownEditor = function(element) {\r\n\r\n    // store elements\r\n    var $input = $(element);\r\n    var $preview = $('div[data-markdown-editor-name=' + element.name + ']');\r\n    var inputname = $input.attr('name');\r\n\r\n    // update the html-preview\r\n    this.updateMarkdownEditor = function () {\r\n\r\n        // clear any timers for this inputname\r\n        if (typeof(window.Barryvanveen.callTimer[inputname]) !== \"undefined\") {\r\n            clearTimeout(window.Barryvanveen.callTimer[inputname]);\r\n        }\r\n\r\n        // start a timer for this particular input, once the timer runs out\r\n        // the html will be requested from the server\r\n        window.Barryvanveen.callTimer[inputname] = setTimeout(function() {\r\n\r\n            // abort all pending requests for this input field\r\n            Barryvanveen.abortPostQueue($input.attr('name'));\r\n\r\n            // make a new ajax post to retrieve html for this markdown\r\n            $.postq(inputname, Barryvanveen.markdownToHtmlRoute, {markdown: $input.val()}, function(data) {\r\n\r\n                // update the preview with retrieved html\r\n                $preview.html(data.html);\r\n                // use Prism for syntax highlighting in preview\r\n                Prism.highlightAll();\r\n\r\n            }, 'json');\r\n\r\n        }, 1000);\r\n\r\n    };\r\n\r\n    // update the html preview on keyUp\r\n    $input.keyup(this.updateMarkdownEditor);\r\n\r\n    // start with filling the preview\r\n    this.updateMarkdownEditor();\r\n\r\n};\r\n\r\n/**\r\n * init markdown editors\r\n */\r\nwindow.Barryvanveen.initMarkdownEditors = function() {\r\n\r\n    $('textarea.js-markdown-editor').each(function(index, element) {\r\n        window.Barryvanveen.editor = new window.Barryvanveen.MarkdownEditor(element);\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * turn an element into a character counter\r\n *\r\n * @param element\r\n */\r\nwindow.Barryvanveen.CharacterCounter = function(element) {\r\n\r\n    // store elements\r\n    var $counter = $(element);\r\n    var inputname = $counter.data('character-counter-name');\r\n    var $input = $('textarea[name=\"'+inputname+'\"]');\r\n\r\n    // update the ounter\r\n    this.updateCounter = function () {\r\n        $counter.html($input.val().length);\r\n    };\r\n\r\n    // update the counter on keyUp\r\n    $input.keyup(this.updateCounter);\r\n\r\n    // start with filling the counter\r\n    this.updateCounter();\r\n\r\n};\r\n\r\n/**\r\n * init character counters\r\n */\r\nwindow.Barryvanveen.initCharacterCounters = function() {\r\n\r\n    $('.js-character-counter').each(function(index, element) {\r\n        window.Barryvanveen.counter = new window.Barryvanveen.CharacterCounter(element);\r\n    });\r\n\r\n};\r\n\r\n\r\n/**\r\n * init log table\r\n */\r\nwindow.Barryvanveen.initLogModal = function() {\r\n\r\n    // handle clicks to open a bootstrap modal with full exception stack\r\n    $('#logModal').on('show.bs.modal', function (event) {\r\n\r\n        // Button that triggered the modal\r\n        var button = $(event.relatedTarget);\r\n\r\n        // Extract info from data-* attributes\r\n        var level = button.data('level');\r\n        var text = button.data('text');\r\n        var file = button.data('file');\r\n        var stack = button.data('stack');\r\n\r\n        // Update the modal's content\r\n        var modal = $(this);\r\n        modal.find('.modal-title').html(level + \": \" + text);\r\n        modal.find('.modal-body').html(\"<small>In file \" + file + \"<br><br>\" + stack + \"</small>\");\r\n\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * start scripts\r\n */\r\nwindow.Barryvanveen.admin();"],"sourceRoot":"/source/"}